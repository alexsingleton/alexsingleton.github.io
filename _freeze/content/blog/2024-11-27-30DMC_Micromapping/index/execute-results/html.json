{
  "hash": "9d0eedbbcf7226e73c99dec254a04d0c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"30 Day Map Challenge: Micromapping\"\ndate: \"2024-11-27\"\ncategories: [Maps]\nimage: \"D27.png\"\nexecute:\n  echo: true\n  message: false\n  warning: false\n---\n\n\n# Day 27: Micromapping\n\nSefton Park is my nearest large park in Liverpool and very popular. I have not tended to use R to make maps that aren't data visualisations, so I used todays challenege to create somethign more cartographically orientated.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(osmdata)\nlibrary(sf)\nlibrary(ggplot2)\n```\n:::\n\n\n\n## Defining the Area\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Define the bounding box for Sefton Park\nbbox <- c(xmin = -2.945, ymin = 53.375, \n          xmax = -2.930, ymax = 53.385)\n```\n:::\n\n\n\n## Downloading OpenStreetMap Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create the query\nquery <- opq(bbox = bbox)\n\n# Get all relevant features\n# Parks and green spaces\nparks <- query %>%\n  add_osm_feature(key = \"leisure\", value = \"park\") %>%\n  osmdata_sf()\n\ngrass <- query %>%\n  add_osm_feature(key = \"landuse\", value = \"grass\") %>%\n  osmdata_sf()\n\ngarden <- query %>%\n  add_osm_feature(key = \"leisure\", value = \"garden\") %>%\n  osmdata_sf()\n\nallotments <- query %>%\n  add_osm_feature(key = \"landuse\", value = \"allotments\") %>%\n  osmdata_sf()\n\n# Water features\nwater <- query %>%\n  add_osm_feature(key = \"natural\", value = \"water\") %>%\n  osmdata_sf()\n\n# Buildings and infrastructure\nbuildings <- query %>%\n  add_osm_feature(key = \"building\") %>%\n  osmdata_sf()\n\n# Roads - more comprehensive categorization\nprimary_roads <- query %>%\n  add_osm_feature(key = \"highway\", value = c(\"primary\", \"primary_link\")) %>%\n  osmdata_sf()\n\nsecondary_roads <- query %>%\n  add_osm_feature(key = \"highway\", value = c(\"secondary\", \"secondary_link\")) %>%\n  osmdata_sf()\n\ntertiary_roads <- query %>%\n  add_osm_feature(key = \"highway\", value = c(\"tertiary\", \"tertiary_link\")) %>%\n  osmdata_sf()\n\nresidential_roads <- query %>%\n  add_osm_feature(key = \"highway\", value = c(\"residential\", \"living_street\", \"unclassified\")) %>%\n  osmdata_sf()\n\nservice_roads <- query %>%\n  add_osm_feature(key = \"highway\", value = \"service\") %>%\n  osmdata_sf()\n\npaths <- query %>%\n  add_osm_feature(key = \"highway\", value = c(\"footway\", \"path\", \"track\", \"steps\", \"pedestrian\")) %>%\n  osmdata_sf()\n\n# Additional features\namenities <- query %>%\n  add_osm_feature(key = \"amenity\") %>%\n  osmdata_sf()\n\nleisure <- query %>%\n  add_osm_feature(key = \"leisure\") %>%\n  osmdata_sf()\n```\n:::\n\n\n\nNext we can create the map as a series of layers...\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create the base map\nggplot() +\n  # Base layer - background\n  geom_sf(data = parks$osm_polygons,\n          fill = \"#E8F4E8\",  # Light green background\n          color = NA) +\n  \n  # Green spaces\n  geom_sf(data = grass$osm_polygons,\n          fill = \"#CCDEB8\",  # Lighter green for grass\n          color = NA) +\n  \n  geom_sf(data = garden$osm_polygons,\n          fill = \"#C8FACC\",  # Slightly different green for gardens\n          color = NA) +\n  \n  geom_sf(data = allotments$osm_polygons,\n          fill = \"#E4E4E4\",  # Grey for allotments\n          color = \"#C8C8C8\") +\n  \n  # Water features\n  geom_sf(data = water$osm_polygons,\n          fill = \"#A5BFDD\",  # Light blue for water\n          color = \"#819CBD\") +\n  \n  # Buildings\n  geom_sf(data = buildings$osm_polygons,\n          fill = \"#D4D4D4\",  # Grey for buildings\n          color = \"#A9A9A9\") +\n  \n  # Roads - all in dark grey with different widths for hierarchy\n  geom_sf(data = primary_roads$osm_lines,\n          color = \"#424242\",  # Dark grey\n          size = 1.2) +\n  \n  geom_sf(data = secondary_roads$osm_lines,\n          color = \"#424242\",\n          size = 1.0) +\n  \n  geom_sf(data = tertiary_roads$osm_lines,\n          color = \"#424242\",\n          size = 0.8) +\n  \n  geom_sf(data = residential_roads$osm_lines,\n          color = \"#424242\",\n          size = 0.6) +\n  \n  geom_sf(data = service_roads$osm_lines,\n          color = \"#424242\",\n          size = 0.4) +\n  \n  # Paths\n  geom_sf(data = paths$osm_lines,\n          color = \"#666666\",  # Lighter grey for paths\n          size = 0.3,\n          linetype = \"dotted\") +\n  \n  # Amenities (points)\n  geom_sf(data = amenities$osm_points,\n          color = \"#000000\",\n          size = 0.5) +\n  \n  # Coordinate system and bounds\n  coord_sf(xlim = c(bbox[\"xmin\"], bbox[\"xmax\"]),\n          ylim = c(bbox[\"ymin\"], bbox[\"ymax\"])) +\n  \n  # Labels and styling\n  labs(title = \"Sefton Park, Liverpool\",\n       caption = \"Data: Â© OpenStreetMap contributors\") +\n  \n    theme_minimal() +\n  \n  # Theme customization\n  theme(plot.title = element_text(size = 12, face = \"bold\"),\n        plot.caption = element_text(size = 8, color = \"grey50\"),\n        panel.grid = element_blank(),\n        panel.background = element_rect(fill = \"#F5F5F5\"),\n        plot.background = element_rect(fill = \"#F5F5F5\"),\n        # Remove all axis elements\n        axis.text = element_blank(),\n        axis.ticks = element_blank(),\n        axis.title = element_blank()) \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}